# ==============================================================================
# Django Backend - Environment Configuration
# ==============================================================================
# Copy this file to .env and update with your local development values
# ==============================================================================

# ==============================================================================
# ENVIRONMENT
# ==============================================================================

# Environment: development, staging, production
DJANGO_SETTINGS_MODULE=config.settings.development

# Debug mode (NEVER set to True in production)
DEBUG=True

# Allowed hosts (comma-separated)
ALLOWED_HOSTS=localhost,127.0.0.1

# ==============================================================================
# SECURITY
# ==============================================================================

# CRITICAL: Generate a secure random key for production!
# You can generate one with: python -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'
SECRET_KEY=django-insecure-change-this-to-a-secure-random-key-in-development

# ==============================================================================
# SERVICE-TO-SERVICE AUTHENTICATION
# ==============================================================================
# CRITICAL: Each service MUST have its own unique signing key.
# NEVER reuse SECRET_KEY or share keys between services.
#
# Generate all service keys with:
#   python scripts/generate_service_keys.py
#
# Or generate individual keys with:
#   python -c 'import secrets; print(secrets.token_urlsafe(64))'
#
# SECURITY: If one service is compromised, unique keys prevent attackers
# from forging tokens for other services.
# ==============================================================================

# Django Backend Service
SERVICE_AUTH_SECRET_DJANGO_BACKEND=CHANGE_ME_generate_with_script

# API Gateway
SERVICE_AUTH_SECRET_API_GATEWAY=CHANGE_ME_generate_with_script

# Celery Worker
SERVICE_AUTH_SECRET_CELERY_WORKER=CHANGE_ME_generate_with_script

# AI Microservices (if using service-to-service auth)
SERVICE_AUTH_SECRET_RECOMMENDATION_ENGINE=CHANGE_ME_generate_with_script
SERVICE_AUTH_SECRET_SEARCH_ENGINE=CHANGE_ME_generate_with_script
SERVICE_AUTH_SECRET_PRICING_ENGINE=CHANGE_ME_generate_with_script
SERVICE_AUTH_SECRET_CHATBOT_RAG=CHANGE_ME_generate_with_script
SERVICE_AUTH_SECRET_FRAUD_DETECTION=CHANGE_ME_generate_with_script
SERVICE_AUTH_SECRET_FORECASTING=CHANGE_ME_generate_with_script
SERVICE_AUTH_SECRET_VISUAL_RECOGNITION=CHANGE_ME_generate_with_script

# Algorithm: HS256 (symmetric) or RS256 (asymmetric, more secure)
# For RS256, you'll need to generate public/private key pairs
SERVICE_AUTH_ALGORITHM=HS256

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================

# Database engine (use postgresql for production)
DB_ENGINE=django.db.backends.postgresql

# PostgreSQL connection details
DB_NAME=ecommerce
DB_USER=postgres
DB_PASSWORD=postgres123
DB_HOST=localhost
DB_PORT=5432

# Alternative: Use DATABASE_URL for easier configuration
# DATABASE_URL=postgresql://postgres:postgres123@localhost:5432/ecommerce

# Database connection options
DB_SSL_REQUIRE=False

# ==============================================================================
# CACHE & QUEUE (REDIS)
# ==============================================================================

# Redis URL for caching and Celery
REDIS_URL=redis://localhost:6379/0

# Celery Configuration
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# ==============================================================================
# ELASTICSEARCH (SEARCH)
# ==============================================================================

# Elasticsearch URL (leave empty to disable search features)
ELASTICSEARCH_URL=http://localhost:9200

# ==============================================================================
# CORS & CSRF CONFIGURATION
# ==============================================================================

# Frontend URL (for CORS and redirects)
FRONTEND_URL=http://localhost:3000

# CORS allowed origins (comma-separated)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# CSRF trusted origins (comma-separated) - Required for POST/PUT/DELETE requests from frontend
CSRF_TRUSTED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# ==============================================================================
# STRIPE PAYMENT INTEGRATION
# ==============================================================================

# Get your test keys from: https://dashboard.stripe.com/test/apikeys
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key

# Webhook secret from: https://dashboard.stripe.com/test/webhooks
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# ==============================================================================
# AWS S3 STORAGE (OPTIONAL)
# ==============================================================================

# Set USE_S3=True in production settings to enable S3 storage
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_STORAGE_BUCKET_NAME=your-bucket-name
AWS_S3_REGION_NAME=us-east-1
AWS_S3_CUSTOM_DOMAIN=your-bucket-name.s3.amazonaws.com

# ==============================================================================
# EMAIL CONFIGURATION
# ==============================================================================

# For development, use console backend (emails printed to console)
EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend

# For production, use SMTP (example with SendGrid):
# EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
# EMAIL_HOST=smtp.sendgrid.net
# EMAIL_PORT=587
# EMAIL_USE_TLS=True
# EMAIL_HOST_USER=apikey
# EMAIL_HOST_PASSWORD=your_sendgrid_api_key
# DEFAULT_FROM_EMAIL=noreply@yourdomain.com

# ==============================================================================
# SECURITY SETTINGS (PRODUCTION)
# ==============================================================================

# Enable these in production with HTTPS
SECURE_SSL_REDIRECT=False
SESSION_COOKIE_SECURE=False
CSRF_COOKIE_SECURE=False
SECURE_HSTS_SECONDS=0

# ==============================================================================
# MONITORING & LOGGING
# ==============================================================================

# Sentry error tracking (optional)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# ==============================================================================
# AI SERVICES INTEGRATION (OPTIONAL)
# ==============================================================================

# API Gateway URL for AI services
AI_GATEWAY_URL=http://localhost:8080

# Individual service URLs (if not using gateway)
RECOMMENDER_URL=http://localhost:8001
SEARCH_URL=http://localhost:8002
PRICING_URL=http://localhost:8003
CHATBOT_URL=http://localhost:8004
FRAUD_URL=http://localhost:8005
FORECASTING_URL=http://localhost:8006
VISION_URL=http://localhost:8007

# ==============================================================================
# DEVELOPMENT TOOLS
# ==============================================================================

# Enable Django Debug Toolbar (only in development)
ENABLE_DEBUG_TOOLBAR=True

# Enable Silk profiling (only in development)
ENABLE_SILK=True
